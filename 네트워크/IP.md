# IP

## 3계층의 기능

### 3계층이 하는 일

- 3계층은 **다른 네트워크 대역** 즉, 멀리 떨어진 곳에 존재하는 **네트워크**까지 어떻게 데이터를 전달할지 제어하는 일을 담당
- 발신에서 착신까지의 패킷의 경로를 제어

### 3계층에서 쓰는 주소

- WAN에서 통신할 때 사용하는 주소 **IP 주소**
- IPv4 주소 : 현재 PC에 할당된 IP 주소
- 서브넷마스크 : IP 주소에 대한 네트워크의 대역을 규정하는 것
- 게이트웨이 주소 : 외부와 통신할 때 사용하는 네트워크의 출입구

### 3계층 프로토콜

- ARP 프로토콜 : IP 주소를 이용해 MAC주소를 알아옴
- IPv4 프로토콜 : WAN에서 통신할 때 사용
- ICMP 프로토콜 : 서로가 통신되는지 확인할 때 사용함

## 일반적인 IP 주소

### Classful IP 주소

- 낭비가 심함
- 구식이라 외울 필요까진 없음 (실무자가 물어볼 가능성 낮음)
- 네트워크를 구분하기 위해 사용
- IP 주소의 낭비가 심함

|        클래스         |     네트워크 구분     | 시작 주소 |   마지막 주소   |
| :-------------------: | :-------------------: | :-------: | :-------------: |
|       A 클래스        | 0XXXXXXX, 첫번째 필드 |  0.0.0.0  | 127.255.255.255 |
|       B 클래스        | 10XXXXXX, 두번째 필드 | 128.0.0.0 | 191.255.255.255 |
|       C 클래스        | 110XXXXX, 세번째 필드 | 192.0.0.0 | 223.255.255.255 |
| D 클래스 (멀티캐스트) |       1110XXXX        | 224.0.0.0 | 239.255.255.255 |
|    E 클래스 (예약)    |       1111XXXX        | 240.0.0.0 | 255.255.255.255 |

### Classless IP 주소

- 낭비되지 않도록 아껴쓰는 Classless IP 주소
- 서브넷 마스크

  - 클래스풀한 네트워크 대역을 나눠주는데 사용하는 값
  - 어디까지가 네트워크 대역을 구분하는데 사용하고 어디서부터 호스트를 구분하는데 사용하는지 지정
  - 32bit 4byte : 255.255.255.192 -> 11111111.11111111.11111111.11000000
  - 2진수로 표기했을 때 1로 시작, 1과 1 사이에는 0이 올 수 없다는 규칙을 가지고 있음
  - 첫번째 IP를 네트워크 주소로 사용하고, 마지막 주소를 브로드캐스트 주소로 사용합니다.

  ### 사설 IP와 공인 IP

  - 공인 IP 1개당 2^32개의 사설 IP
  - 사설 IP는 외부와 통신할 때 공인 IP로 바뀌어서 통신함
  - 실제 인터넷 세상에서는 공인 IP로만 통신하여 외부 네트워에 대역에서는 사설 IP 대역이 안 보임
  - 외부에서 어떻게 내부를 구분하지 그럼? -> 포트포워딩을 해줘야함

  ### IPv6

  - 개발자 말고 네트워크 담당자가 되려면 따로 공부 필요함

## 특수한 IP 주소

- 0.0.0.0/0 : wildcard, 나머지 모든 IP
- 127.0.0.1 : loopback, 자기 자신을 나타내는 주소
- 게이트웨이 주소 : 외부와 통신할 때 거치는 주소 (외부와 통하는 문)

### IPv4 와 IPv6의 차이

- IPv6의 장점

  - 패킷을 단편화하지 않으면서 보다 효율적인 라우팅이 가능
  - 지연에 민감한 패킷을 구분하는 기본적인 QoS(Quality of Service)
  - NAT를 없앰으로써 주소 공간을 32비트에서 128비트로 확장
  - 네트워크 레이어 보안 내장(IPsec)
  - 손쉬운 네트워크 관리를 위한 무상태 주소 자동 구성
  - 처리 오버헤트가 줄어든 개선된 헤더 구조

- IPv6

  - 128비트의 콜론으로 분리된 8개의 16비트 16진수 블록
  - 멀티캐스트 주소를 사용
  - 전역적으로 교유한 유니캐스트 주소와 로컬 주소를 사용

- IPv4
  - 클래스로 분리됨
  - 각 디바이스가 멈추고 패킷을 확인하도록 강제하는 브로드캐스트 주소를 사용
  - 전역적으로 고유한 퍼블릭 주소를 트래픽 및 프라이빗 주소에 사용

---

## 질문 정리

- Q. 공인 IP와 사설 IP의 차이에 대해서 설명해주세요.

```
사설 IP는 내부 네트워크 상에서만 사용되는 주소로, 세계 인터넷에서는 사용할 수 없는 IP 주소입니다.
세계 인터넷에서 사용하기 위해서는 공인 IP를 사용하여야 하며, 사설 IP들은 외부 네트워크와 통신을 할 때 모두 공인 IP로 변경되어 통신을 하게 됩니다.
```

- Q. IPv4 와 IPv6의 차이는?

```
IPv4는 32비트의 길이를 가지고 있지만 IPv6는 길이가 128비트로 늘어나 더 많은 네트워크 주소를 가질 수 있습니다.
또한 IPv6가 패킷 크기가 확장 되었으며, 효율적인 라우팅으로 IP 패킷 처리를 신속하게 할 수 있습니다.
```

- Q. 서브넷 마스크에 대해서 설명해주세요.

```
IP 낭비가 심한 클래스풀한 IP를 클래스리스하게 만들기 위하여 사용하는 것,
IP 주소를 네트워크 영역과 호스트 영역으로 나눌 때 사용하는 것입니다.
서브넷 마스크로
```

- Q. IP 주소 클래스에 대해서 설명해주세요.

```
네트워크를 구분하기 위해 사용하는 것으로,
A클래스부터 E클래스 까지 있는데 각각의 클래스는 고정 비트가 정해져 있습니다.
IP 주소의 낭비가 심합니다.
```
